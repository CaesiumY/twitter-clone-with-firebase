(this["webpackJsonptwitter-clone-with-firebase"]=this["webpackJsonptwitter-clone-with-firebase"]||[]).push([[0],{32:function(e,t,a){e.exports=a(50)},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(30),l=a.n(c),u=a(4),i=a(15),s=a(12),o=a(7),m=a(17),p=function(e){e.userObj;return r.a.createElement("nav",null,r.a.createElement("ul",{style:{display:"flex",justifyContent:"center",marginTop:50}},r.a.createElement("li",null,r.a.createElement(m.b,{to:"/",className:"navLink__text"},r.a.createElement(o.a,{icon:i.c,color:"#04aaff",size:"2x"}),r.a.createElement("span",{style:{marginTop:10}},"Home"))),r.a.createElement("li",null,r.a.createElement(m.b,{to:"/profile",className:"navLink__text"},r.a.createElement(o.a,{icon:s.e,color:"#04aaff",size:"2x"}),r.a.createElement("span",{style:{marginTop:10}},"Profile")))))},f=function(){return r.a.createElement("div",null,"404 Not Found")},d=a(2),b=a.n(d),h=a(20),E=a(6),v=a(18);a(44),a(46),a(51);v.initializeApp({apiKey:"AIzaSyBVTVxQ1B4nf9fQ99asNf-xZlQVxF3x1YE",authDomain:"twitter-clone-with-firebase.firebaseapp.com",databaseURL:"https://twitter-clone-with-firebase.firebaseio.com",projectId:"twitter-clone-with-firebase",storageBucket:"twitter-clone-with-firebase.appspot.com",messagingSenderId:"246336413829",appId:"1:246336413829:web:ad8961a58311fff55949ec"});var w=v,g=v.auth(),O=v.firestore(),j=v.storage(),x=function(e){var t=e.tweetObj,a=e.isOwner,c=Object(n.useState)(!1),l=Object(u.a)(c,2),i=l[0],m=l[1],p=Object(n.useState)(t.text),f=Object(u.a)(p,2),d=f[0],h=f[1],v=function(){return m((function(e){return!e}))},w=function(){var e=Object(E.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure to delete this Tweet?")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,O.doc("tweets/".concat(t.id)).delete();case 5:if(!t.attachmentUrl){e.next=8;break}return e.next=8,j.refFromURL(t.attachmentUrl).delete();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(E.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,O.doc("tweets/".concat(t.id)).update({text:d});case 3:m(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"tweet"},i?r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:g,className:"container tweetEdit"},r.a.createElement("input",{type:"text",value:d,onChange:function(e){var t=e.target.value;h(t)},maxLength:120,autoFocus:!0,required:!0,className:"formInput"}),r.a.createElement("input",{type:"submit",value:"Edit tweet",className:"formBtn"})),r.a.createElement("button",{onClick:v,className:"formBtn cancelBtn"},"Cancel")):r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,t.text),t.attachmentUrl&&r.a.createElement("a",{href:t.attachmentUrl,target:"__blank"},r.a.createElement("img",{src:t.attachmentUrl,alt:"tweetImage"})),a&&r.a.createElement("div",{className:"tweet__actions"},r.a.createElement("span",{onClick:v},r.a.createElement(o.a,{icon:s.a})),r.a.createElement("span",{onClick:w},r.a.createElement(o.a,{icon:s.d})))))},y=a(3),N=function(e){var t=e.userObj,a=e.onRefreshUser,c=Object(n.useState)(t.displayName||t.email.split("@")[0]),l=Object(u.a)(c,2),i=l[0],s=l[1],o=Object(y.g)(),m=function(){var e=Object(E.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.signOut();case 2:o.push("/");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(E.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t.displayName===i){e.next=5;break}return e.next=4,t.updateProfile({displayName:i});case 4:a();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"profileName"},t.displayName||t.email.split("@")[0],"'s Profile"),r.a.createElement("form",{onSubmit:p,className:"profileForm"},r.a.createElement("input",{type:"text",value:i,onChange:function(e){var t=e.target.value;s(t)},autoFocus:!0,className:"formInput"}),r.a.createElement("input",{type:"submit",value:"Update Profile",className:"formBtn",style:{marginTop:10}})),r.a.createElement("span",{onClick:m,className:"formBtn cancelBtn logOut"},"Log Out"))},k=function(e){var t=e.userObj,a=e.onRefreshUser,c=Object(n.useState)([]),l=Object(u.a)(c,2),i=l[0],s=l[1];return Object(n.useEffect)((function(){(function(){var e=Object(E.a)(b.a.mark((function e(){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.collection("tweets").where("uid","==",t.uid).orderBy("createdAt","desc").get();case 2:a=e.sent,n=a.docs.map((function(e){return Object(h.a)({id:e.id},e.data())})),s(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),r.a.createElement("div",{className:"container"},r.a.createElement(N,{userObj:t,onRefreshUser:a}),r.a.createElement("p",{className:"profile__myTweets"},"My Tweets"),i.map((function(e){return r.a.createElement(x,{key:e.id,tweetObj:e,isOwner:e.uid===t.uid})})))},S=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),i=Object(u.a)(l,2),s=i[0],o=i[1],m=Object(n.useState)(!0),p=Object(u.a)(m,2),f=p[0],d=p[1],h=Object(n.useState)(""),v=Object(u.a)(h,2),w=v[0],O=v[1],j=function(){var e=Object(E.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!f){e.next=8;break}return e.next=5,g.createUserWithEmailAndPassword(a,s);case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,g.signInWithEmailAndPassword(a,s);case 10:n=e.sent;case 11:console.log("onSubmit -> data",n),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),O(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:j,className:"container"},r.a.createElement("input",{type:"email",placeholder:"email",name:"email",value:a,onChange:function(e){return c(e.target.value)},className:"authInput"}),r.a.createElement("input",{type:"password",placeholder:"password",name:"password",value:s,onChange:function(e){return o(e.target.value)},className:"authInput"}),r.a.createElement("input",{type:"submit",value:f?"Sign In":"Log In",className:"authInput authSubmit"}),r.a.createElement("input",{type:"checkbox",name:"isNewAccount",id:"isNewAccount",value:"isNewAccount",onChange:function(){return d((function(e){return!e}))},className:"authSwitch"}),r.a.createElement("label",{htmlFor:"isNewAccount",className:"authSwitch__label"},"Already have Account?"),w&&r.a.createElement("span",{className:"authError"},w)))},_=function(e){var t=e.provider,a=function(){var e=Object(E.a)(b.a.mark((function e(t){var a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.name,e.prev=1,"google"===a?n=new w.auth.GoogleAuthProvider:"github"===a?n=new w.auth.GithubAuthProvider:alert("Wrong ".concat(n," provider!")),e.next=5,g.signInWithPopup(n);case 5:r=e.sent,console.log("onSocialLogin -> data",r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("button",{className:"authBtn",name:t,onClick:a},"Continue with"," ",r.a.createElement("span",{style:{textTransform:"capitalize"}},t," "),r.a.createElement(o.a,{icon:"google"===t?i.b:i.a}))},I=function(){return r.a.createElement("div",{className:"authContainer"},r.a.createElement(o.a,{icon:i.c,color:"#04aaff",size:"5x",style:{marginBottom:30}}),r.a.createElement(S,null),r.a.createElement("div",{className:"authBtns"},r.a.createElement(_,{provider:"google"}),r.a.createElement(_,{provider:"github"})))},A=a(53),C=function(e){var t=e.userObj,a=Object(n.useState)(""),c=Object(u.a)(a,2),l=c[0],i=c[1],m=Object(n.useState)(""),p=Object(u.a)(m,2),f=p[0],d=p[1],h=function(){var e=Object(E.a)(b.a.mark((function e(a){var n,r,c,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),""!==l){e.next=3;break}return e.abrupt("return");case 3:if(n="",!f){e.next=12;break}return r=j.ref().child("".concat(t.uid,"/").concat(Object(A.a)())),e.next=8,r.putString(f,"data_url");case 8:return c=e.sent,e.next=11,c.ref.getDownloadURL();case 11:n=e.sent;case 12:return u={text:l,createdAt:Date.now(),uid:t.uid,attachmentUrl:n},e.next=15,O.collection("tweets").add(u);case 15:i(""),d("");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:h,className:"tweetForm"},r.a.createElement("div",{className:"tweetInput__container"},r.a.createElement("input",{className:"tweetInput__input",type:"text",placeholder:"What's on your mind?",value:l,onChange:function(e){var t=e.target.value;i(t)},maxLength:120}),r.a.createElement("input",{type:"submit",value:"\u2192",className:"tweetInput__arrow"})),r.a.createElement("label",{htmlFor:"attach-file",className:"tweetInput__label"},r.a.createElement("span",null,"Add Photos"),r.a.createElement(o.a,{icon:s.b})),r.a.createElement("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0];if(t){var a=new FileReader;a.onloadend=function(e){var t=e.target.result;d(t)},a.readAsDataURL(t)}},style:{opacity:0}}),f&&r.a.createElement("div",{className:"tweetInput__attachment"},r.a.createElement("img",{src:f,style:{backgroundImage:f},alt:l}),r.a.createElement("div",{className:"tweetForm__clear",onClick:function(){return d("")}},r.a.createElement("span",null,"Remove"),r.a.createElement(o.a,{icon:s.c})))))},U=function(e){var t=e.userObj,a=Object(n.useState)([]),c=Object(u.a)(a,2),l=c[0],i=c[1];return Object(n.useEffect)((function(){O.collection("tweets").orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(h.a)({id:e.id},e.data())}));i(t)}))}),[]),r.a.createElement("div",{className:"container"},r.a.createElement(C,{userObj:t}),r.a.createElement("div",{style:{marginTop:10}},l.map((function(e){return r.a.createElement(x,{key:e.id,tweetObj:e,isOwner:e.uid===t.uid})}))))},F=function(e){var t=e.isAuth,a=e.userObj,n=e.onRefreshUser;return r.a.createElement(m.a,null,t&&r.a.createElement(p,{userObj:a}),t?r.a.createElement("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"}},r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/"},r.a.createElement(U,{userObj:a})),r.a.createElement(y.b,{exact:!0,path:"/profile"},r.a.createElement(k,{userObj:a,onRefreshUser:n})),r.a.createElement(y.b,{path:"*"},r.a.createElement(f,null)),r.a.createElement(y.a,{from:"*",to:"/"}))):r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/"},r.a.createElement(I,null)),r.a.createElement(y.b,{path:"*"},r.a.createElement(f,null)),r.a.createElement(y.a,{from:"*",to:"/"})))};var B=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(u.a)(l,2),s=i[0],o=i[1],m=Object(n.useState)(null),p=Object(u.a)(m,2),f=p[0],d=p[1];Object(n.useEffect)((function(){g.onAuthStateChanged((function(e){e?(o(!0),d(b(e))):(o(!1),d(null)),c(!0)}))}),[]);var b=function(e){return{uid:e.uid,displayName:e.displayName,updateProfile:function(t){return e.updateProfile(t)}}};return r.a.createElement(r.a.Fragment,null,a?r.a.createElement(F,{isAuth:s,userObj:f,onRefreshUser:function(){console.log("refreshed"),d(b(g.currentUser))}}):"Initializing...")};a(49);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.7f73d9ea.chunk.js.map